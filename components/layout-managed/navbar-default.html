<nav id="main-menu" class="nav navbar-default">
	<div class="navbar-header">
		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>
	</div>
	<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		<ul role="navigation" class="nav navbar-nav">
		</ul>
	</div>
</nav>

<script type="text/javascript">
	var tableData = new Array();
	$(dataTable).sheetrock({
		// sql: 'select %Id%, %Name%, %Parent% where %HideInLists% != TRUE order by %SortOrder% desc',
		sql: 'select %Id%, %Name%, %Parent% where %HideInLists% != "TRUE" and %Name% is not null',

		labels: ['Id', 'Name', 'Parent'],
		rowHandler: function(row) {
			tableData.push(row.cells);
		},
		userCallback: function () {
			mainMenu = $('nav#main-menu div >ul[role="navigation"]');

			for (var i = 0; i < tableData.length; i++) {
				var currentObject = tableData[i];
				if (currentObject.Name != (null || "")) {
					mainMenu.append('<li data-id="' + currentObject.Id + '"><a data-page="' + currentObject.Id + '">' + currentObject.Name + '</a></li>');
				}
			}
			for (var i = 0; i < tableData.length; i++) {
				var currentObject = tableData[i];
								console.log(currentObject);

				if (currentObject.Name != (null || "")) {
					if (currentObject.Parent != (null || "")) {
						var parentElement = $('li[data-id="' + currentObject.Parent + '"]');
						if (parentElement.length) {
							if (!parentElement.data('dropdown')) {
								parentElement.attr('data-dropdown', true);
								parentElement.children('a:first').append(' <span class="caret"></span>');
								parentElement.append('<div class="menu-backgroun"><ul data-id="' + currentObject.Parent + '"></ul></div>');
							}
							var elementList = $('li[data-id="' + currentObject.Parent + '"]>ul[data-id="' + currentObject.Parent + '"]');
							$('li[data-id="' + currentObject.Id + '"]').remove();
							elementList.append('<li data-id="' + currentObject.Id + '"><a data-page="' + currentObject.Id + '">' + currentObject.Name + '</a></li>');
						}
					}
				}
			}

		}
	});

	
</script>